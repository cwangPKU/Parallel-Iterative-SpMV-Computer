#!/bin/bash
#SBATCH -o job_%j_%N.out
#SBATCH -p cpu
#SBATCH -J hw2
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=16
#SBATCH -t 15:00


for threads in 1 2 4 8 16
do
    for i in {1..5}
    do
        echo "Running input${i}.csr with OMP_NUM_THREADS=${threads}..."
        OMP_NUM_THREADS=$threads ./parallel_BCSR_dense input${i}.csr -o output${i}_parallel_BCSR_dense_threads${threads}
    done
done
